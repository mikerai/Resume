(function(e){e.fn.stickyBar=function(t){t=e.extend({until:"",top:0,bottom:0,animated:false,speed:400,easing:null,fixedClass:"isFixed",stoppedClass:"isStopped",onFixed:function(){},onStatic:function(){},onStopped:function(){}},t);return this.each(function(){var n=e(window),r=e(this),i=r.offset().top,s=r.css("margin-top"),u=r.css("margin-bottom"),a=r.outerHeight(),f=r.css("position"),l=t.until!==""?e(t.until).offset().top-a-t.top:e(document).height();if(!t.animated){e("<div />",{"class":"space-holder",style:"display:none;height:"+a+"px;margin-top:"+s+";margin-bottom:"+u}).insertBefore(r)}else{if(f=="static"){r.css("position","relative")}}n.on("scroll",function(){var n=e(this).scrollTop();if(n>=i-t.top){if(n<=l-t.bottom){t.onFixed.call(r);if(!t.animated){r.css({position:"fixed",top:t.top,left:r.offset().left,width:r.width()+"px","margin-top":0}).removeClass(t.stoppedClass).addClass(t.fixedClass).prev().show()}else{r.stop().animate({top:n-i+t.top},t.speed,t.easing,function(){e(this).css("top",n-i+t.top)}).removeClass(t.stoppedClass).addClass(t.fixedClass)}}else{t.onStopped.call(r);r.css({position:"relative",top:l-i-t.bottom,left:0,"margin-top":s,"margin-bottom":u+t.bottom}).removeClass(t.fixedClass).addClass(t.stoppedClass).prev().hide()}}else{t.onStatic.call(r);if(!t.animated){r.css({position:f,top:0,left:0,"margin-top":s,"margin-bottom":u}).removeClass(t.fixedClass+" "+t.stoppedClass).prev().hide()}else{r.stop().animate({top:0},t.speed,t.easing,function(){e(this).css("top",0)}).removeClass(t.fixedClass+" "+t.stoppedClass)}}})})}})(jQuery)