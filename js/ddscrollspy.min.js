var lastId,topMenu=$("#top-menu, #menu-mobile"),topMenuHeight=topMenu.outerHeight()+15,menuItems=topMenu.find("a"),scrollItems=menuItems.map(function(){var e=$($(this).attr("href"));if(e.length){return e}});menuItems.click(function(e){var t=$(this).attr("href"),n=t==="#"?0:$(t).offset().top-topMenuHeight+1;$("html, body").stop().animate({scrollTop:n},300);e.preventDefault()});$(window).scroll(function(){var e=$(this).scrollTop()+topMenuHeight;var t=scrollItems.map(function(){if($(this).offset().top<e)return this});t=t[t.length-1];var n=t&&t.length?t[0].id:"";if(lastId!==n){lastId=n;menuItems.parent().removeClass("active").end().filter("[href=#"+n+"]").parent().addClass("active")}})