function autoPlay(){var e=$(settings.datesDiv).find("a."+settings.datesSelectedClass);if(settings.autoPlayDirection=="forward"){if(e.parent().is("li:last-child")){$(settings.datesDiv+" li:first-child").find("a").trigger("click")}else{e.parent().next().find("a").trigger("click")}}else if(settings.autoPlayDirection=="backward"){if(e.parent().is("li:first-child")){$(settings.datesDiv+" li:last-child").find("a").trigger("click")}else{e.parent().prev().find("a").trigger("click")}}}jQuery.fn.timelinr=function(e){settings=jQuery.extend({orientation:"horizontal",containerDiv:"#timeline",datesDiv:"#dates",datesSelectedClass:"selected",datesSpeed:"normal",issuesDiv:"#issues",issuesSelectedClass:"selected",issuesSpeed:"fast",issuesTransparency:.2,issuesTransparencySpeed:500,prevButton:"#prev",nextButton:"#next",arrowKeys:"false",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:2e3},e);$(function(){var e=$(settings.datesDiv+" li").length;var t=$(settings.issuesDiv+" li").length;var n=$(settings.datesDiv).find("a."+settings.datesSelectedClass);var r=$(settings.issuesDiv).find("li."+settings.issuesSelectedClass);var i=$(settings.containerDiv).width();var s=$(settings.containerDiv).height();var o=$(settings.issuesDiv).width();var u=$(settings.issuesDiv).height();var a=$(settings.issuesDiv+" li").width();var f=$(settings.issuesDiv+" li").height();var l=$(settings.datesDiv).width();var c=$(settings.datesDiv).height();var h=$(settings.datesDiv+" li").width();var p=$(settings.datesDiv+" li").height();if(settings.orientation=="horizontal"){$(settings.issuesDiv).width(a*t);$(settings.datesDiv).width(h*e).css("marginLeft",i/2-h/2);var d=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px")))}else if(settings.orientation=="vertical"){$(settings.issuesDiv).height(f*t);$(settings.datesDiv).height(p*e).css("marginTop",s/2-p/2);var d=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px")))}$(settings.datesDiv+" a").click(function(t){t.preventDefault();var n=$(this).text();var r=$(this).parent().prevAll().length;if(settings.orientation=="horizontal"){$(settings.issuesDiv).animate({marginLeft:-a*r},{queue:false,duration:settings.issuesSpeed})}else if(settings.orientation=="vertical"){$(settings.issuesDiv).animate({marginTop:-f*r},{queue:false,duration:settings.issuesSpeed})}$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:false,duration:settings.issuesSpeed}).removeClass(settings.issuesSelectedClass).eq(r).addClass(settings.issuesSelectedClass).fadeTo(settings.issuesTransparencySpeed,1);if(e==1){$(settings.prevButton+","+settings.nextButton).fadeOut("fast")}else if(e==2){if($(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)){$(settings.prevButton).fadeOut("fast");$(settings.nextButton).fadeIn("fast")}else if($(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)){$(settings.nextButton).fadeOut("fast");$(settings.prevButton).fadeIn("fast")}}else{if($(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)){$(settings.nextButton).fadeIn("fast");$(settings.prevButton).fadeOut("fast")}else if($(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)){$(settings.prevButton).fadeIn("fast");$(settings.nextButton).fadeOut("fast")}else{$(settings.nextButton+","+settings.prevButton).fadeIn("slow")}}$(settings.datesDiv+" a").removeClass(settings.datesSelectedClass);$(this).addClass(settings.datesSelectedClass);if(settings.orientation=="horizontal"){$(settings.datesDiv).animate({marginLeft:d-h*r},{queue:false,duration:"settings.datesSpeed"})}else if(settings.orientation=="vertical"){$(settings.datesDiv).animate({marginTop:d-p*r},{queue:false,duration:"settings.datesSpeed"})}});$(settings.nextButton).bind("click",function(n){n.preventDefault();var r=$(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index();if(settings.orientation=="horizontal"){var i=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px")));var s=i/a;var o=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px")));var u=o-h;if(i<=-(a*t-a)){$(settings.issuesDiv).stop();$(settings.datesDiv+" li:last-child a").click()}else{if(!$(settings.issuesDiv).is(":animated")){$(settings.datesDiv+" li").eq(r+1).find("a").trigger("click")}}}else if(settings.orientation=="vertical"){var i=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px")));var s=i/f;var o=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px")));var u=o-p;if(i<=-(f*t-f)){$(settings.issuesDiv).stop();$(settings.datesDiv+" li:last-child a").click()}else{if(!$(settings.issuesDiv).is(":animated")){$(settings.datesDiv+" li").eq(r+1).find("a").trigger("click")}}}if(e==1){$(settings.prevButton+","+settings.nextButton).fadeOut("fast")}else if(e==2){if($(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)){$(settings.prevButton).fadeOut("fast");$(settings.nextButton).fadeIn("fast")}else if($(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)){$(settings.nextButton).fadeOut("fast");$(settings.prevButton).fadeIn("fast")}}else{if($(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)){$(settings.prevButton).fadeOut("fast")}else if($(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)){$(settings.nextButton).fadeOut("fast")}else{$(settings.nextButton+","+settings.prevButton).fadeIn("slow")}}});$(settings.prevButton).click(function(t){t.preventDefault();var n=$(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index();if(settings.orientation=="horizontal"){var r=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px")));var i=r/a;var s=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px")));var o=s+h;if(r>=0){$(settings.issuesDiv).stop();$(settings.datesDiv+" li:first-child a").click()}else{if(!$(settings.issuesDiv).is(":animated")){$(settings.datesDiv+" li").eq(n-1).find("a").trigger("click")}}}else if(settings.orientation=="vertical"){var r=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px")));var i=r/f;var s=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px")));var o=s+p;if(r>=0){$(settings.issuesDiv).stop();$(settings.datesDiv+" li:first-child a").click()}else{if(!$(settings.issuesDiv).is(":animated")){$(settings.datesDiv+" li").eq(n-1).find("a").trigger("click")}}}if(e==1){$(settings.prevButton+","+settings.nextButton).fadeOut("fast")}else if(e==2){if($(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)){$(settings.prevButton).fadeOut("fast");$(settings.nextButton).fadeIn("fast")}else if($(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)){$(settings.nextButton).fadeOut("fast");$(settings.prevButton).fadeIn("fast")}}else{if($(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)){$(settings.prevButton).fadeOut("fast")}else if($(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)){$(settings.nextButton).fadeOut("fast")}else{$(settings.nextButton+","+settings.prevButton).fadeIn("slow")}}});if(settings.arrowKeys=="true"){if(settings.orientation=="horizontal"){$(document).keydown(function(e){if(e.keyCode==39){$(settings.nextButton).click()}if(e.keyCode==37){$(settings.prevButton).click()}})}else if(settings.orientation=="vertical"){$(document).keydown(function(e){if(e.keyCode==40){$(settings.nextButton).click()}if(e.keyCode==38){$(settings.prevButton).click()}})}}$(settings.datesDiv+" li").eq(settings.startAt-1).find("a").trigger("click");if(settings.autoPlay=="true"){setInterval("autoPlay()",settings.autoPlayPause)}})}