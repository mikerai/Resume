(function(e,t){"use strict";function u(t){var i=e.extend({},s,t);var o=e(this);for(var u=0,f=o.length;u<f;u++){a.apply(o.eq(u),[e.extend({},i)])}if(!r.hasClass("wallpaper-inititalized")){r.addClass("wallpaper-inititalized");n.on("resize.wallpaper",i,p)}return o}function a(t){var n=e(this);if(!n.hasClass("wallpaper")){e.extend(t,n.data("wallpaper-options"));n.addClass("wallpaper loading").append('<div class="wallpaper-container"></div>');t.isAnimating=false;t.$target=n;t.$container=t.$target.find(".wallpaper-container");t.$target.data("wallpaper",t).on("resize.wallpaper",t,h);var r=t.source;t.source=null;f(r,t);t.onReady.call()}}function f(e,t){if(!t.isAnimating){if(t.source!==e){t.$target.addClass("loading");t.source=e;t.isAnimating=true;if(typeof e==="object"){c(e,t)}else{l(e,t)}}else{t.$target.trigger("wallpaper.loaded")}}}function l(t,n){var r=e('<div class="wallpaper-media wallpaper-image"><img /></div>'),s=r.find("img");s.one("load.wallpaper",function(){if(i){r.addClass("native").css({backgroundImage:"url("+n.source+")"})}if(n.$container.find(".wallpaper-media").length<1){r.appendTo(n.$container).animate({opacity:1},n.speed);n.isAnimating=false;n.$target.trigger("wallpaper.loaded")}else{r.appendTo(n.$container).animate({opacity:1},n.speed,function(){n.$container.find(".wallpaper-image").not(":last").remove();n.isAnimating=false;n.$target.trigger("wallpaper.loaded")})}n.$target.removeClass("loading");h({data:n});n.onLoad.call()}).attr("src",n.source);if(s[0].complete||s[0].readyState===4){s.trigger("load")}}function c(t,n){var r=e('<div class="wallpaper-media wallpaper-video"></div>'),i="<video";if(n.loop){i+=" loop"}i+=">";if(n.source.webm){i+='<source src="'+n.source.webm+'" type="video/webm" />'}if(n.source.mp4){i+='<source src="'+n.source.mp4+'" type="video/mp4" />'}if(n.source.ogg){i+='<source src="'+n.source.ogg+'" type="video/ogg" />'}i+="</video>";r.append(i).find("video").one("loadedmetadata",function(e){if(n.$container.find(".wallpaper-media").length<1){r.appendTo(n.$container).animate({opacity:1},n.speed);n.isAnimating=false;n.$target.trigger("wallpaper.loaded");if(n.hoverPlay){n.$target.on("mouseover.boxer",o.play).on("mouseout.boxer",o.stop)}else if(n.autoPlay){this.play()}}else{r.appendTo(n.$container).animate({opacity:1},n.speed,function(){n.$container.find(".wallpaper-image").not(":last").remove();n.isAnimating=false;n.$target.trigger("wallpaper.loaded")})}n.$target.removeClass("loading").trigger("wallpaper.loaded");h({data:n});n.onLoad.call()})}function h(e){if(e.preventDefault){e.preventDefault();e.stopPropagation()}var t=e.data;var n=t.$container.find(".wallpaper-media");for(var r=0,i=n.length;r<i;r++){var s=n.eq(r),o=s.find("video").length?"video":"image",u=s.find(o);if(u.length&&!(o==="image"&&t.nativeSupport)){var a=t.$target.outerWidth(),f=t.$target.outerHeight(),l=a/f,c=d(u);t.width=c.naturalWidth;t.height=c.naturalHeight;t.left=0;t.top=0;var h=t.width/t.height;t.height=f;t.width=t.height*h;if(t.width<a){t.width=a;t.height=t.width/h}t.left=-(t.width-a)/2;t.top=-(t.height-f)/2;s.css({height:t.height,width:t.width,left:t.left,top:t.top})}}}function p(){e(".wallpaper").each(function(){var t=e(this).data("wallpaper");h({data:t})})}function d(e){if(e.is("img")){var t=e[0];if(typeof t.naturalHeight!=="undefined"){return{naturalHeight:t.naturalHeight,naturalWidth:t.naturalWidth}}else{var n=new Image;n.src=t.src;return{naturalHeight:n.height,naturalWidth:n.width}}}else{return{naturalHeight:e[0].videoHeight,naturalWidth:e[0].videoWidth}}return false}var n=e(t),r=e("body"),i="backgroundSize"in document.documentElement.style;var s={autoPlay:true,hoverPlay:false,loop:true,onLoad:e.noop,onReady:e.noop,source:null,speed:500};var o={defaults:function(t){s=e.extend(s,t||{});return e(this)},destroy:function(){var t=e(this).each(function(){var t=e(this).data("wallpaper");t.$target.removeClass("wallpaper").off(".boxer");t.$container.remove()});if(e(".wallpaper").length<1){r.removeClass("wallpaper-inititalized");n.off(".wallpaper")}return t},load:function(t){return e(this).each(function(){var n=e(this).data("wallpaper");if(n){f(t,n)}})},play:function(){return e(this).each(function(){var t=e(this).data("wallpaper");if(t){var n=t.$container.find("video");if(n.length){n[0].play()}}})},stop:function(){return e(this).each(function(){var t=e(this).data("wallpaper");if(t){var n=t.$container.find("video");if(n.length){n[0].pause()}}})}};e.fn.wallpaper=function(e){if(o[e]){return o[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return u.apply(this,arguments)}return this};e.wallpaper=function(e){if(e==="defaults"){o.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}})(jQuery,window)